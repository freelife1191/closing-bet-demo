# project-showcase 시나리오/대본 품질 고도화 설계서

기준일: 2026-02-19
대상 저장소: `/Users/freelife/vibe/lecture/hodu/closing-bet-demo`

## 1. 배경

요구사항은 다음 3가지를 동시에 만족하는 고품질 소개 영상 설계다.

1. `Smart Money Bot` 본체 프로젝트의 실제 기능을 누락 없이 소개할 것
2. 버전 3종(간소화/보통/디테일)에 대해 씬-대본-TTS-자막을 정밀 동기화할 것
3. README/UI/코드 기반의 실제 용어를 사용하고 오역/의역/오타를 방지할 것

현재 파이프라인은 `manifest -> record -> voice -> captions -> render -> validate`의 실행 체인은 갖추고 있으나, 고품질 대본 설계를 위한 전용 품질 게이트와 용어 정확성 검증은 부족하다.

## 2. 범위

### 2.1 포함
- 소개 대상: `Smart Money Bot` 본체 기능 전체
- 시청자: 실사용 투자자/고객
- 버전별 시나리오/대본/TTS/자막 설계 표준 정의
- 용어 정확성 검증 스킬 설계
- 시나리오 오케스트레이션 스킬 설계
- 버전별 산출물/검증 루프/완료 기준 정의

### 2.2 제외
- 즉시 코드 구현(본 문서는 설계 단계)
- 영상 스타일링(모션 그래픽 고도화) 세부 제작
- 모델 교체 등 인프라 대수술

## 3. 기준 소스(SoT)

용어/기능 정합성은 아래 순서로 판단한다.

1. UI 실문구: `frontend/src/app/**`, `frontend/src/app/components/Sidebar.tsx`
2. 공식 문서: `README.md`, `AGENTS.md`, `CLAUDE.md`
3. 실제 기능 엔드포인트/엔진: `app/routes/*.py`, `engine/*.py`

참고: `GEMINI.md`는 현재 저장소에 존재하지 않는다.

## 4. 버전 전략

1. 간소화 버전: `58~60초`
- 목표: 핵심 가치 + 핵심 기능(Overview/Market Gate/VCP/종가베팅/AI 상담) 압축 소개

2. 보통 버전: `120초`
- 목표: 사용자 관점 기능 흐름 + 운영 신뢰성까지 균형 소개

3. 디테일 버전: `180~240초(가변)`
- 원칙: 최소 3분 이상, 설명량이 충분치 않으면 3분대 종료 허용
- 금지: 시간 채우기 목적의 불필요한 반복

## 5. 동기화 아키텍처(TTS/자막/영상)

### 5.1 공통 규격
- 프레임 기준: `30fps`
- 씬 단위 시간표를 단일 원본으로 유지
- 각 씬에 `start/end/duration/screen/action/narration/cue`를 묶어 관리

### 5.2 TTS 속도 정책(세미나 발표형)
- 기준 발화: `4.6 음절/초`
- 허용 범위: `4.4~4.8 음절/초`
- 씬별 미세조정: 기본속도 대비 `±8%`

### 5.3 No-Cut 보정 순서
1. TTS 속도 미세조정
2. 문장 길이 미세 압축(의미 유지, 최대 8%)
3. 해당 씬 길이만 소폭 확장(`+0.4~1.2초`)

### 5.4 자막 규칙
- cue는 음성 발화 단위 1:1 매핑
- 최소 표시시간 `1.0초`, 최대 `6.0초`
- 마지막 자막 종료는 영상 종료보다 최소 `0.15초` 앞서게 배치

### 5.5 정량 합격 기준
- `caption_end >= voice_end`
- `render_end >= voice_end`
- 버전별 총 길이 목표 오차 `±0.5초`
- 씬 경계 정렬 `100%`(다음 씬에서 이전 대사 재생 금지)

## 6. 기능 커버리지 매트릭스

### 6.1 UI 레이어(사용자 기능)
- `KR Market > Overview`
- `VCP 시그널`
- `종가베팅`
- `누적 성과`
- `AI 상담`
- `모의투자`
- `데이터 상태`
- 랜딩 페이지의 Architecture/Core Features/Dual AI/Market Gate

### 6.2 엔진 레이어(핵심 로직)
- `Market Gate` 시장 판정
- `VCP` 패턴 탐지/점수
- `종가베팅` 점수/등급 체계
- `4-Phase Pipeline`
- `Multi-Model AI` 교차검증
- 데이터 소스 우선순위(실시간 우선 + fallback)

### 6.3 운영 레이어
- 스케줄러 기반 자동 실행
- 상태 확인/재실행
- 다중 채널 알림
- 데이터 무결성/상태 점검

### 6.4 신뢰성 레이어
- 시장 우선 원칙(게이트 우선)
- 품질/검증 리포트 흐름
- 실패시 재조정 루프

## 7. 씬 설계 템플릿

버전과 무관하게 씬은 아래 필드를 고정한다.

- `scene_id`
- `start_sec`
- `end_sec`
- `duration_sec`
- `screen_path`
- `must_show_ui`
- `actions[]`
- `narration_ko`
- `tts_rate`
- `speech_est_sec`
- `subtitle_cues[]`
- `validation_note`

## 8. 버전별 씬 구조(초안)

### 8.1 간소화(58~60초)
- S1(0-8): 브랜드/문제정의
- S2(8-18): Overview + Market Gate
- S3(18-30): VCP 시그널
- S4(30-45): 종가베팅
- S5(45-60): AI 상담 + 마무리

### 8.2 보통(120초)
- S1(0-10): 브랜드/핵심 가치
- S2(10-24): Overview
- S3(24-40): Market Gate 원칙
- S4(40-58): VCP
- S5(58-76): 종가베팅
- S6(76-90): 누적 성과
- S7(90-106): AI 상담 + 모의투자
- S8(106-120): 데이터 상태/운영 신뢰 + 결론

### 8.3 디테일(180~240초 가변)
- 기본 목표 3분 20초
- 설명량이 충분하면 최대 4분
- 구성: UI 전체 + 엔진 + 운영 + 신뢰성 레이어 완전 소개

## 9. 신규 스킬 설계

### 9.1 `psk-kr-script-terminology-guardian`
목적: 시나리오/대본/자막 용어 정확성 보증

- 입력: 대본/manifest/자막 + SoT 용어셋
- 검증:
  - 브랜드/기능명 정확 일치
  - 금지 오역 패턴 탐지
  - UI 실문구 대비 불일치 탐지
- 출력:
  - `term_audit_report.json`
  - `term_audit_report.md`
- 실패 기준: `ERROR` 1건 이상

### 9.2 `psk-showcase-scenario-orchestrator`
목적: 3버전 씬/대본/TTS/자막 설계 통합 관리

- 입력: 기능 커버리지 매트릭스, 목표 길이, TTS 정책
- 기능:
  - 버전별 시간 예산 배분
  - 씬별 발화/자막 cue 계산
  - No-Cut 정책 자동 보정
- 출력:
  - `scenario_short.md`
  - `scenario_normal.md`
  - `scenario_detail.md`
  - `tts_plan_*.json`
  - `caption_plan_*.json`

## 10. 품질 게이트 설계

1. Gate T1(용어): 오역/오타/비표준 명칭 0건
2. Gate T2(TTS): 씬별 발화 길이 예산 통과
3. Gate T3(자막): cue 경계/노출시간/잘림 없음
4. Gate T4(길이): 버전별 목표 길이 오차 `±0.5초`

모든 게이트 통과 전에는 최종 대본 확정 금지.

## 11. 반복 검증 루프

1. 초안 생성
2. 용어 감사 실행
3. TTS 길이 시뮬레이션
4. 자막 cue 시뮬레이션
5. 실패 씬만 국소 보정
6. 재검증
7. 전체 pass 후 확정

## 12. 완료 조건(DoD)

- 버전 3종 시나리오/대본/동기화 계획 생성 완료
- 용어 오류 0
- TTS/자막 잘림 0
- 씬-설명 불일치 0
- 길이 목표 오차 `±0.5초`

