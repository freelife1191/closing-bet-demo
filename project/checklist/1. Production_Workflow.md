# Production Workflow Checklist

기준일: 2026-02-20

## 1) 환경 준비
- [ ] `python3 -m venv project/project-showcase-kit/.venvs/verify`
- [ ] `pip install -r project/project-showcase-kit/requirements-dev.txt`
- [ ] `requests`, `yaml`, `pytest` import 가능

## 2) 테스트
- [ ] 스모크: `python -m pytest -q project/project-showcase-kit/tests/pipeline/test_voice_supertonic_engine_policy.py project/project-showcase-kit/tests/pipeline/test_tts_comparison_report.py`
- [ ] `python -m pytest -q project/project-showcase-kit/tests` 실행
- [ ] 실패 0건 확인
- [ ] `tests/pipeline/test_pipeline_runtime_units.py` 포함 확인
- [ ] 전체 회귀는 실제 Qwen 추론 포함으로 장시간 소요 가능성 확인

## 3) 실행
- [ ] `./project/project-showcase-kit/scripts/pipeline/run_stage.sh showcase-scenario --manifest project/video/manifest.json --language ko+en`
- [ ] `./project/project-showcase-kit/scripts/pipeline/run_stage.sh scene-runner --manifest project/video/manifest.json`
- [ ] `./project/project-showcase-kit/scripts/pipeline/run_stage.sh manifest-from-scenario --manifest project/video/manifest.json --script-out project/video/script.md --scenario-version normal --language ko+en`
- [ ] `./project/project-showcase-kit/scripts/pipeline/run_all.sh --language ko+en --scenario-version normal --manifest-from-scenario auto --strict-tts true --skip-health --auto-start-services false`
- [ ] `./project/project-showcase-kit/scripts/pipeline/run_all.sh --language ko+en --scenario-version short --manifest-from-scenario true --strict-tts true --skip-health --auto-start-services false`
- [ ] `./project/project-showcase-kit/scripts/pipeline/run_all.sh --language ko+en --scenario-version detail --manifest-from-scenario true --strict-tts true --skip-health --auto-start-services false`
- [ ] 강제 재생성 필요 시 `./project/project-showcase-kit/scripts/pipeline/run_all.sh --language ko+en --cache-mode refresh --strict-tts true --skip-health --auto-start-services false`
- [ ] `./project/project-showcase-kit/scripts/pipeline/manager_cycle.sh --language ko+en --tts-engine supertonic-local --strict-tts true --skip-health --auto-start-services false`
- [ ] `project/video/manifest.json` 생성(`showcaseScenarioVersion=normal|short|detail` 중 실행 버전과 일치)
- [ ] `project/video/scenes/scene-01.mp4` 생성
- [ ] `project/video/audio/narration.wav` 생성
- [ ] `project/video/audio/narration.json` 생성
- [ ] `project/video/captions/subtitles.srt` 생성
- [ ] `project/out/audio/narration.<lang>.wav` 생성(선택 언어 포함 시)
- [ ] `project/out/captions/subtitles.<lang>.srt` 생성(선택 언어 포함 시)
- [ ] `project/out/final_showcase.mp4` 생성
- [ ] `project/out/final_showcase.<lang>.mp4` 생성(선택 언어 포함 시)
- [ ] `project/out/final_showcase.short.mp4`, `project/out/final_showcase.normal.mp4`, `project/out/final_showcase.detail.mp4` 보관
- [ ] `project/video/assets/thumbnail_prompt.md` 생성
- [ ] `project/video/assets/thumbnail_prompt_nanobanana_pro.md` 생성
- [ ] `project/video/assets/youtube_description_prompt.md` 생성
- [ ] `project/video/assets/project_overview_doc_prompt.md` 생성
- [ ] `project/video/assets/ppt_slide_prompt_gemini.md` 생성

## 4) 검증
- [ ] `project/video/evidence/validation_report.json` 생성
- [ ] `status: pass`
- [ ] `manifest_exists`, `voice_exists` 모두 pass
- [ ] `caption_covers_voice`, `render_covers_voice` 모두 pass
- [ ] `project/video/audio/narration.json`의 track speaker 정책 일치
  - Supertonic: `ko=Sarah`, `en=Jessica`
  - Qwen: `ko=Sohee`, `en=Serena`, `ja=Ono_Anna`, `zh/기타=Vivian`
- [ ] `output_within_project_root` pass
- [ ] `project/video/evidence/signoff.json`의 `status: approved`
- [ ] `python3 project/project-showcase-kit/scripts/video/compare_tts_engines.py --manifest project/video/manifest.json --language ko+en` 실행
- [ ] `project/video/evidence/tts_comparison_report.json`에서 `qwen-local-cmd`, `supertonic-local` 모두 `status=pass`

## 5) 운영 기록
- [ ] 실행 시각 기록
- [ ] 사용 옵션 기록(`language`, `tts-engine`)
- [ ] 실패/경고 로그 보관
